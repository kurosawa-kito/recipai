# ğŸ” å†·è”µåº«é£Ÿææ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ  (Analyze Image Test)

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€Roboflow fridgevision/3 ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨ã—ãŸå†·è”µåº«å†…é£Ÿæã®è‡ªå‹•æ¤œå‡ºã‚·ã‚¹ãƒ†ãƒ ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ“‹ æ¦‚è¦

- **ç›®çš„**: å†·è”µåº«ã®å†™çœŸã‹ã‚‰é£Ÿæã‚’è‡ªå‹•æ¤œå‡º
- **AI ãƒ¢ãƒ‡ãƒ«**: YOLOv8 fridgevision/3 (Roboflowæä¾›)
- **è¨€èª**: Python 3.9+
- **ä¸»è¦æ©Ÿèƒ½**:
  - å†·è”µåº«ç”»åƒã®é£Ÿææ¤œå‡º
  - æ¤œå‡ºçµæœã®å¯è¦–åŒ–
  - æ³¨é‡ˆä»˜ãç”»åƒã®ç”Ÿæˆ

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. å¿…è¦ãªç’°å¢ƒ

- Python 3.9ä»¥ä¸Š
- ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶š (AIãƒ¢ãƒ‡ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ç”¨)

### 2. è‡ªå‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— & å®Ÿè¡Œ

```bash
# ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd python/analyze_image_test

# è‡ªå‹•å®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œï¼ˆåˆå›ã¯ä¾å­˜é–¢ä¿‚ã‚’è‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼‰
./run_test.sh
```

### 3. æ‰‹å‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— (ã‚ªãƒ—ã‚·ãƒ§ãƒ³)

```bash
# ä»®æƒ³ç’°å¢ƒä½œæˆ
python3 -m venv venv
source venv/bin/activate

# ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
python test_fridge_detection.py
```

## ğŸ“¸ ãƒ†ã‚¹ãƒˆç”»åƒã®æº–å‚™

ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒ†ã‚¹ãƒˆç”¨ã®å†·è”µåº«ç”»åƒã‚’é…ç½®ã—ã¦ãã ã•ã„ï¼š

```
public/images/analyze_image_test/
```

**ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹å½¢å¼**: `.jpg`, `.jpeg`, `.png`, `.bmp`

## ï¿½ å®Ÿè¡Œçµæœ

ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¾Œã€ä»¥ä¸‹ãŒç”Ÿæˆã•ã‚Œã¾ã™ï¼š

1. **ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›**

   ```
   ğŸ¯ æ¤œå‡ºã•ã‚ŒãŸé£Ÿææ•°: 1
   ğŸ“‹ æ¤œå‡ºã•ã‚ŒãŸé£Ÿæ:
      1. apple (ä¿¡é ¼åº¦: 0.61)
   ```

2. **æ³¨é‡ˆä»˜ãç”»åƒ**
   - å…ƒç”»åƒã«æ¤œå‡ºçµæœã‚’é‡ã­ãŸç”»åƒ
   - ä¿å­˜å…ˆ: `public/images/analyze_image_test/result_X_annotated.jpg`

## ğŸ› ï¸ æŠ€è¡“è©³ç´°

### ä½¿ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

- `roboflow`: ãƒ¢ãƒ‡ãƒ«ç®¡ç†
- `inference`: AIæ¨è«–å®Ÿè¡Œ
- `supervision`: æ¤œå‡ºçµæœå¯è¦–åŒ–
- `opencv-python`: ç”»åƒå‡¦ç†
- `numpy`: æ•°å€¤è¨ˆç®—

### AIãƒ¢ãƒ‡ãƒ«æƒ…å ±

- **ãƒ¢ãƒ‡ãƒ« ID**: `fridgevision/3`
- **æä¾›è€…**: Roboflow
- **ã‚¿ã‚¤ãƒ—**: ç‰©ä½“æ¤œå‡º (YOLOv8ãƒ™ãƒ¼ã‚¹)
- **ç‰¹åŒ–åˆ†é‡**: å†·è”µåº«å†…é£Ÿæ

## ï¿½ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
analyze_image_test/
â”œâ”€â”€ test_fridge_detection.py  # ãƒ¡ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰
â”œâ”€â”€ requirements.txt          # Pythonä¾å­˜é–¢ä¿‚
â”œâ”€â”€ run_test.sh              # è‡ªå‹•å®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ create_sample_images.py  # ã‚µãƒ³ãƒ—ãƒ«ç”»åƒç”Ÿæˆãƒ„ãƒ¼ãƒ«
â”œâ”€â”€ README.md                # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ venv/                    # ä»®æƒ³ç’°å¢ƒï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
```

## ğŸ”§ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### API ã‚­ãƒ¼ã®å¤‰æ›´

```python
# test_fridge_detection.py ã®38è¡Œç›®ä»˜è¿‘
detector = FridgeDetector(api_key="your_api_key_here")
```

### æ¤œå‡ºã—ãã„å€¤ã®èª¿æ•´

ãƒ¢ãƒ‡ãƒ«ã®ä¿¡é ¼åº¦ã—ãã„å€¤ã‚’èª¿æ•´ã—ãŸã„å ´åˆã¯ã€`test_fridge_detection.py`å†…ã§è¨­å®šã§ãã¾ã™ã€‚

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼**

   ```bash
   # pipã‚’ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰
   pip install --upgrade pip
   pip install -r requirements.txt
   ```

2. **ç”»åƒèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼**
   - ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ãŒç ´æã—ã¦ã„ãªã„ã‹ç¢ºèª
   - ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹å½¢å¼ã‹ç¢ºèª

3. **API ã‚¨ãƒ©ãƒ¼**
   - ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã‚’ç¢ºèª
   - API ã‚­ãƒ¼ãŒæ­£ã—ã„ã‹ç¢ºèª

4. **macOS Apple Silicon ã§ã®å•é¡Œ**
   ```bash
   # Rosetta 2çµŒç”±ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
   arch -x86_64 pip install -r requirements.txt
   ```

### ãƒ­ã‚°ã®ç¢ºèª

è©³ç´°ãªã‚¨ãƒ©ãƒ¼æƒ…å ±ã¯å®Ÿè¡Œæ™‚ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ›ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ & åˆ©ç”¨è¦ç´„

- Roboflow APIã®åˆ©ç”¨è¦ç´„ã«å¾“ã£ã¦ãã ã•ã„
- å•†ç”¨åˆ©ç”¨ã®å ´åˆã¯ã€Roboflowã®å•†ç”¨ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ãŒå¿…è¦ãªå ´åˆãŒã‚ã‚Šã¾ã™

## ğŸ”— é–¢é€£ãƒªãƒ³ã‚¯

- [Roboflow Documentation](https://docs.roboflow.com/)
- [Supervision Library](https://supervision.roboflow.com/)
- [OpenCV Documentation](https://docs.opencv.org/)

---

## ğŸ’¡ RECIPAIãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®æ´»ç”¨

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯ã€RECIPAIãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä»¥ä¸‹ã®æ©Ÿèƒ½ã§æ´»ç”¨ã§ãã¾ã™ï¼š

1. **é£Ÿæè‡ªå‹•èªè­˜**: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸå†·è”µåº«ç”»åƒã‹ã‚‰é£Ÿæãƒªã‚¹ãƒˆã‚’è‡ªå‹•ç”Ÿæˆ
2. **ãƒ¬ã‚·ãƒ”ææ¡ˆ**: æ¤œå‡ºã•ã‚ŒãŸé£Ÿæã‚’åŸºã«ã—ãŸãƒ¬ã‚·ãƒ”æ¨è–¦
3. **åœ¨åº«ç®¡ç†**: å†·è”µåº«å†…ã®é£Ÿæã‚’å®šæœŸçš„ã«ãƒã‚§ãƒƒã‚¯

### Next.jsçµ±åˆä¾‹

```typescript
// pages/api/analyze-fridge.ts
import { exec } from "child_process";

export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse
) {
  const imagePath = req.body.imagePath;

  // Pythonã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
  exec(
    `cd python/analyze_image_test && python test_fridge_detection.py ${imagePath}`,
    (error, stdout, stderr) => {
      if (error) {
        res.status(500).json({ error: error.message });
        return;
      }

      // çµæœã‚’ãƒ‘ãƒ¼ã‚¹
      const ingredients = parseDetectionResults(stdout);
      res.status(200).json({ ingredients });
    }
  );
}
```
